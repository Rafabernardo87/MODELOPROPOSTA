<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MODELO DE ENCAMINHAMENTO DA PROPOSTA</title>

  <style>
    body {
      font-family: 'Aptos Corpos', sans-serif;
    }
  </style>

  <script>
    // Função para formatar os valores
    function formatarValor(valor) {
      return valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    }

    // Função para gerar a proposta
    function gerarProposta() {
      var numeroProcesso = document.getElementById("numeroProcesso").value;
      var danoMaterial = parseFloat(document.getElementById("danoMaterial").value.replace(".", "").replace(",", "."));
      var honorariosPercentual = parseFloat(document.getElementById("honorarios").value.replace(".", "").replace(",", ".")) / 100; // Honorários em percentual

      // Verificar se os campos obrigatórios foram preenchidos
      if (numeroProcesso === "" || isNaN(danoMaterial) || isNaN(honorariosPercentual)) {
        alert("Preencha corretamente todos os campos.");
        return;
      }

      // Selecionar a modalidade de acordo
      var modalidade = document.querySelector('input[name="modalidade"]:checked');
      if (!modalidade) {
        alert("Selecione a modalidade de acordo.");
        return;
      }
      modalidade = modalidade.value;

      // Calcular o valor total da condenação
      var valorDanoMoral = parseFloat(document.getElementById("danoMoral").value.replace(".", "").replace(",", "."));
      var valorCondenacao = valorDanoMoral + danoMaterial;

      // Verificar o número de parcelas, caso seja um acordo parcelado
      var parcelas = "";
      if (valorCondenacao > 3000 && modalidade.includes("Parcelado")) {
        parcelas = document.getElementById("parcelas").value;
        if (parcelas === "") {
          alert("Insira o número de parcelas.");
          return;
        }
      }

      // Calcular os valores com economia de 15% e 10%
      var economia15 = (valorCondenacao * 0.85);
      var economia10 = (valorCondenacao * 0.90);

      // Calcular honorários com base no valor total da condenação
      var honorarios15 = (economia15 * honorariosPercentual);
      var honorarios10 = (economia10 * honorariosPercentual);

      // Calcular o valor total com base na economia
      var total15 = economia15 + honorarios15;
      var total10 = economia10 + honorarios10;

      // Gerar o resultado com o formato solicitado
      var resultado = "";

      resultado += "VALOR DO ACORDO COM ECONOMIA 15% (INCLUINDO HONORÁRIOS): R$ " + formatarValor(total15) + "\n";
      resultado += "DANO MORAL (COM ECONOMIA): R$ " + formatarValor(economia15 * (valorDanoMoral / valorCondenacao)) + "\n"; // Dano moral com economia
      resultado += "DANO MATERIAL: R$ " + formatarValor(danoMaterial) + "\n";
      resultado += "HONORÁRIOS (sobre o valor com economia): R$ " + formatarValor(honorarios15) + "\n";
      resultado += "20 DIAS ÚTEIS PARA PAGAMENTO.\n";
      resultado += "------------------------------------------------------------------\n";
      resultado += "VALOR DO ACORDO COM ECONOMIA 10% (INCLUINDO HONORÁRIOS): R$ " + formatarValor(total10) + "\n";
      resultado += "DANO MORAL (COM ECONOMIA): R$ " + formatarValor(economia10 * (valorDanoMoral / valorCondenacao)) + "\n"; // Dano moral com economia
      resultado += "DANO MATERIAL: R$ " + formatarValor(danoMaterial) + "\n";
      resultado += "HONORÁRIOS (sobre o valor com economia): R$ " + formatarValor(honorarios10) + "\n";
      resultado += "20 DIAS ÚTEIS PARA PAGAMENTO.\n";
      resultado += "------------------------------------------------------------------\n";

      if (valorCondenacao > 3000 && modalidade.includes("Parcelado")) {
        var valorParcela = (valorCondenacao / parcelas).toFixed(2);
        resultado += "VALOR DO ACORDO SEM ECONOMIA - PARCELAMENTO EM " + parcelas + " VEZES DE R$ " + formatarValor(valorParcela) + ":\n";
        resultado += "DANO MORAL: R$ " + formatarValor(valorDanoMoral) + "\n"; // Mantendo o valor de danos morais
        resultado += "DANO MATERIAL: R$ " + formatarValor(danoMaterial) + "\n";
        resultado += "HONORÁRIOS: R$ " + formatarValor((valorParcela * honorariosPercentual).toFixed(2)) + "\n";
        resultado += "20 DIAS ÚTEIS PARA PAGAMENTO.\n";
        resultado += "------------------------------------------------------------------\n";
      }

      // Exibir o resultado na página
      document.getElementById("resultadoTexto").innerText = resultado;
    }

    // Função para exibir o campo de parcelas apenas se o valor da condenação for superior a R$ 3.000
    function exibirParcelas() {
      var danoMoral = parseFloat(document.getElementById("danoMoral").value.replace(".", "").replace(",", "."));
      var danoMaterial = parseFloat(document.getElementById("danoMaterial").value.replace(".", "").replace(",", "."));
      var valorCondenacao = danoMoral + danoMaterial;
      var parcelasDiv = document.getElementById("parcelasDiv");

      if (valorCondenacao > 3000) {
        parcelasDiv.style.display = "block";  // Exibe o campo de parcelas
      } else {
        parcelasDiv.style.display = "none";  // Esconde o campo de parcelas
      }
    }

    // Função para resetar o formulário e limpar o resultado
    function resetarFormulario() {
      document.getElementById("numeroProcesso").value = "";
      document.getElementById("danoMoral").value = "";
      document.getElementById("danoMaterial").value = "";
      document.getElementById("honorarios").value = "";
      document.getElementById("parcelas").value = "";
      document.querySelector('input[name="modalidade"]:checked').checked = false;
      document.getElementById("resultadoTexto").innerText = "";
      exibirParcelas();
    }

    // Função para copiar a proposta gerada
    function copiarProposta() {
      var textoProposta = document.getElementById("resultadoTexto").innerText;

      if (textoProposta === "") {
        alert("Nenhuma proposta gerada para copiar.");
        return;
      }

      navigator.clipboard.writeText(textoProposta).then(function() {
        alert("Proposta copiada com sucesso!");
      }, function() {
        alert("Falha ao copiar a proposta.");
      });
    }
  </script>

</head>
<body>

  <h1>MODELO DE ENCAMINHAMENTO DA PROPOSTA</h1>

  <!-- Formulário de inputs -->
  <form>
    <label for="numeroProcesso">Número do Processo:</label>
    <input type="text" id="numeroProcesso" name="numeroProcesso" required><br><br>

    <label for="danoMoral">Dano Moral (R$):</label>
    <input type="text" id="danoMoral" name="danoMoral" placeholder="1.000,00" oninput="exibirParcelas()" required><br><br>

    <label for="danoMaterial">Dano Material (R$):</label>
    <input type="text" id="danoMaterial" name="danoMaterial" placeholder="1.000,00" oninput="exibirParcelas()" required><br><br>

    <label for="honorarios">Percentual de Honorários (%):</label>
    <input type="number" id="honorarios" name="honorarios" step="0.01" required><br><br>

    <label>Modalidade de Acordo Proposta:</label><br>
    <input type="radio" id="parcelado" name="modalidade" value="Acordo Parcelado (disponível para valores superiores a R$ 3.001,00)">
    <label for="parcelado">Acordo Parcelado</label><br>
    
    <input type="radio" id="economia" name="modalidade" value="Acordo com Economia de [15% ou 10%]">
    <label for="economia">Acordo com Economia de 15% ou 10%</label><br><br>

    <!-- Campo de parcelas, escondido inicialmente -->
    <div id="parcelasDiv" style="display:none;">
      <label for="parcelas">Número de Parcelas:</label>
      <input type="number" id="parcelas" name="parcelas" min="1" max="4"><br><br>
    </div>

    <!-- Botão para gerar a proposta -->
    <button type="button" onclick="gerarProposta()">Gerar Proposta</button>
    
    <!-- Botão para resetar o formulário -->
    <button type="button" onclick="resetarFormulario()">Resetar</button>

    <!-- Botão para copiar a proposta gerada -->
    <button type="button" onclick="copiarProposta()">Copiar Proposta</button>
  </form>

  <!-- Exibição da proposta gerada -->
  <h2>Proposta Gerada:</h2>
  <pre id="resultadoTexto"></pre>

</body>
</html>

</html>



